<%- include('./cabecalhogestao'); %>
    <h2>Central leito UAI Martins</h2>
    
        <% if(id.length > 0) { %>
            <% for(var i = 0; i < id.length; i++) {%>
        <table class="table table-striped" style="width: 100%;" id="mytable">
            <input name="usuario" type="hidden" value="<%=id[i].id_usuario %>">
            <thead>
                <tr>
                    <th>Setor</th>
                   
                    <th>Capacidade</th>
                   
                    <th>Quantidade de Camas</th>
                   
                    <th>Quantidade de Camas Ocupadas</th>
                   
                    <th>Quantidade de Camas Vagas</th>
                   
                    <th>Quantidade de Macas</th>
                   
                    <th>Quantidade de Macas Ocupadas</th>
                   
                    <th>Quantidade de Macas Vagas</th>
                   
                    <th>Quantidade de Berços</th>
                   
                    <th>Quantidade de Berços Ocupados</th>
                   
                    <th>Quantidade de Berços Vagos</th>
                   
                    <th>Quantidade de Macas Parada</th>
                </tr>
            </thead>
            <tbody>   
                <% if(leito.length > 0) { %>
                    <% for(var j = 0; j < leito.length; j++) {%> 
                <tr>
                    <td>Sala de Emergência Não Covid</td>
                   
                    <td  ><%=leito[j].senc %></td>
                   
                    <td class="subtotalqtdcamas"><%=leito[j].sencc %></td>
                   
                    <td class="subtotalqtdcamasocupado"><%=leito[j].senccv %></td>
                   
                    <td class="subtotalqtdcamasvago"></td>
                   
                    <td class="subtotalmacas"><%=leito[j].sencm %></td>
                   
                    <td class="subtotalmacasocupadas"><%=leito[j].sencmv %></td>
                   
                    <td class="subtotalmacasvagas"></td>
                    
                    <td class="subtotalberco">0</td>
                     
                    <td class="subtotalbercoocupado">0</td>
                   
                    <td class="subtotalbercovago">0</td>
                    
                    <td class="subtotalmacasparada"><%=leito[j].macaparada %></td>
                           
                </tr>
                <tr>
                    <td>Sala de Emergência</td>
                   
                    <td ><%=leito[j].sec %></td>
                   
                    <td class="subtotalqtdcamas"><%=leito[j].secc %></td>
                   
                    <td class="subtotalqtdcamasocupado"><%=leito[j].seccv %></td>
                   
                    <td class="subtotalqtdcamasvago"></td>
                   
                    <td class="subtotalmacas"><%=leito[j].secm %></td>
                   
                    <td class="subtotalmacasocupadas"><%=leito[j].secmv %></td>
                   
                    <td class="subtotalmacasvagas"></td>
                    
                    <td class="subtotalberco">0</td>
                     
                    <td class="subtotalbercoocupado">0</td>
                   
                    <td class="subtotalbercovago">0</td>
                    
                    <td class="subtotalmacasparada">0</td>
                               
                </tr>
                <tr>
                    <td>Enfermaria Masculina</td>
                   
                    <td  ><%=leito[j].em %></td>
                   
                    <td class="subtotalqtdcamas"><%=leito[j].emcc %></td>
                   
                    <td class="subtotalqtdcamasocupado"><%=leito[j].emccv %></td>
                   
                    <td class="subtotalqtdcamasvago"></td>
                   
                    <td class="subtotalmacas"><%=leito[j].emcm %></td>
                   
                    <td class="subtotalmacasocupadas"><%=leito[j].emcmv %></td>
                   
                    <td class="subtotalmacasvagas"></td>
                    
                    <td class="subtotalberco">0</td>
                     
                    <td class="subtotalbercoocupado">0</td>
                   
                    <td class="subtotalbercovago">0</td>
                    
                    <td class="subtotalmacasparada">0</td>
                           
                </tr>
                <tr>
                    <td>Enfermaria Feminina</td>
                   
                    <td ><%=leito[j].ef %></td>
                   
                    <td class="subtotalqtdcamas"><%=leito[j].efcc %></td>
                   
                    <td class="subtotalqtdcamasocupado"><%=leito[j].efccv %></td>
                   
                    <td class="subtotalqtdcamasvago"></td>
                   
                    <td class="subtotalmacas"><%=leito[j].efcm %></td>
                   
                    <td class="subtotalmacasocupadas"><%=leito[j].efcmv %></td>
                   
                    <td class="subtotalmacasvagas"></td>
                    
                    <td class="subtotalberco">0</td>
                     
                    <td class="subtotalbercoocupado">0</td>
                   
                    <td class="subtotalbercovago">0</td>
                    
                    <td class="subtotalmacasparada">0</td>
                             
                </tr>
                <tr>
                    <td>Corredor</td>
                   
                    <td  ><%=leito[j].corredor %></td>
                   
                    <td class="subtotalqtdcamas"><%=leito[j].corredorcc %></td>
                   
                    <td class="subtotalqtdcamasocupado"><%=leito[j].corredorccv %></td>
                   
                    <td class="subtotalqtdcamasvago"></td>
                   
                    <td class="subtotalmacas"><%=leito[j].corredorcm %></td>
                   
                    <td class="subtotalmacasocupadas"><%=leito[j].corredorcmv %></td>
                   
                    <td class="subtotalmacasvagas"></td>
                    
                    <td class="subtotalberco">0</td>
                     
                    <td class="subtotalbercoocupado">0</td>
                   
                    <td class="subtotalbercovago">0</td>
                    
                    <td class="subtotalmacasparada">0</td>
                              
                </tr>
                <tr>
                    <td>Pediatria</td>
                   
                    <td ><%=leito[j].pediatria %></td>
                   
                    <td class="subtotalqtdcamas"><%=leito[j].pediatriacc %></td>
                   
                    <td class="subtotalqtdcamasocupado"><%=leito[j].pediatriaccv %></td>
                   
                    <td class="subtotalqtdcamasvago"></td>
                   
                    <td class="subtotalmacas">0</td>
                   
                    <td class="subtotalmacasocupadas">0</td>
                   
                    <td class="subtotalmacasvagas"></td>
                    
                    <td class="subtotalberco"><%=leito[j].pediatriabc %></td>
                     
                    <td class="subtotalbercoocupado"><%=leito[j].pediatriabcv %></td>
                   
                    <td class="subtotalbercovago">0</td>
                    
                    <td class="subtotalmacasparada">0</td>
                             
                </tr>
                <tr>
                    <td>Ginecologia/Obstetricia</td>
                   
                    <td  ><%=leito[j].go %></td>
                   
                    <td class="subtotalqtdcamas"><%=leito[j].gocc %></td>
                   
                    <td class="subtotalqtdcamasocupado"><%=leito[j].goccv %></td>
                   
                    <td class="subtotalqtdcamasvago"></td>
                   
                    <td class="subtotalmacas" ><%=leito[j].gocm %></td>
                   
                    <td class="subtotalmacasocupadas"><%=leito[j].gocmv %></td>
                   
                    <td class="subtotalmacasvagas"></td>
                    
                    <td class="subtotalberco">0</td>
                     
                    <td class="subtotalbercoocupado">0</td>
                   
                    <td class="subtotalbercovago">0</td>
                    
                    <td class="subtotalmacasparada">0</td>
                           
                </tr>
                <tr>
                    <td>Enfermaria Ambulatorio(Covid)</td>
                   
                    <td ><%=leito[j].ea %></td>
                   
                    <td class="subtotalqtdcamas"><%=leito[j].eacc %></td>
                   
                    <td class="subtotalqtdcamasocupado" ><%=leito[j].eaccv %></td>
                   
                    <td class="subtotalqtdcamasvago"></td>
                   
                    <td class="subtotalmacas" ><%=leito[j].eacm %></td>
                   
                    <td class="subtotalmacasocupadas"><%=leito[j].eacmv %></td>
                   
                    <td class="subtotalmacasvagas"></td>
                    
                    <td class="subtotalberco">0</td>
                     
                    <td class="subtotalbercoocupado">0</td>
                   
                    <td class="subtotalbercovago">0</td>
                    
                    <td class="subtotalmacasparada">0</td>
                           
                </tr>
                <p>Data Ultima Atualização: <%=leito[j].dataatualizacao %></p>
                <p>Hora Ultima Atualização: <%=leito[j].horaatualizacao %></p>
                <% } %>	
                <% } %>
                <% } %>	
                <% } %>
            </tbody>
            <tfoot>
                <tr>
                    <td>Total</td>
                   
                    <td class="resultadocapacidade"></td>
                   
                    <td class="resultadocamas"></td>
                   
                    <td class="resultadocamasocupados"></td>
                   
                    <td class="resultadocamasvagas"></td>
                    
                    <td class="resultadocberco"></td>
                     
                    <td class="resultadobercoocupados"></td>
                   
                    <td class="resultadobercovagos"></td>
                   
                    <td class="resultadomacas"></td>
                   
                    <td class="resultadomacasocupados"></td>
                   
                    <td class="resultadomacasvagas"></td>
                    
                    <td class="resultadomacasparada"></td>
                               
                </tr>
            </tfoot>
        </table>
       
        <br>
        <br>
        <br>

<!-- Importando o jQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.7.0/js/dataTables.buttons.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/1.7.0/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/select/1.3.2/js/dataTables.select.min.js" ></script>
<script src="https://cdn.datatables.net/buttons/1.7.0/js/buttons.print.min.js"></script>
<!-- Importando o js do bootstrap -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script>
 $(document).ready(function() {
        $('#mytable').DataTable( {
            dom: 'Bfrtip',
            order:false,
            "scrollX": true,  
   
        pageLength: 50,
        buttons: [       
            {
                "extend": "copyHtml5",
                "text": "COPIAR",
               
                footer:true
            },          
            {
                "extend": "pdf",
                "text": "PDF",
               
                footer:true
            },
            {
                "extend": "excelHtml5",
                "text": "EXCEL",
               
                footer:true
            },
            {
                "extend": "print",
                "text": "IMPRIMIR",
               
                footer:true
            }
        ],language: {
            buttons: {
                copyTitle: 'Copiado para área de transferência',
                copyKeys: 'Appuyez sur <i>ctrl</i> ou <i>\u2318</i> + <i>C</i> pour copier les données du tableau à votre presse-papiers. <br><br>Pour annuler, cliquez sur ce message ou appuyez sur Echap.',
                copySuccess: {
                    _: '%d linhas copiadas',
                    1: '1 linha copiada'
                }
            },
            "paginate": {
                "previous": "Anterior",
                "next": "Próximo"
            },
            "search": "Pesquisar:"
        },
        select: true,
        "footerCallback": function ( row, data, start, end, display ) {
                var api = this.api(), data;
 
                // Remove the formatting to get integer data for summation
                var intVal = function ( i ) {
                    return typeof i === 'string' ?
                        i.replace(/[\$,]/g, '')*1 :
                        typeof i === 'number' ?
                            i : 0;
                };
 
                // Total over all pages
                total = api
                    .column( 1 )
                    .data()
                    .reduce( function (a, b) {
                        return intVal(a) + intVal(b);
                    }, 0 );
 
                // Total over this page
                pageTotal = api
                    .column( 1, { page: 'current'} )
                    .data()
                    .reduce( function (a, b) {
                        return intVal(a) + intVal(b);
                    }, 0 );
 
                // Update footer
                $( api.column( 1 ).footer() ).html(
                  pageTotal // +' ( ₱'+ total + ')' ouput the total of all pages //
                );
            
            // Total over all pages
            total = api
                    .column( 2 )
                    .data()
                    .reduce( function (a, b) {
                        return intVal(a) + intVal(b);
                    }, 0 );
 
                // Total over this page
                pageTotal = api
                    .column( 2, { page: 'current'} )
                    .data()
                    .reduce( function (a, b) {
                        return intVal(a) + intVal(b);
                    }, 0 );
 
                // Update footer
                $( api.column( 2 ).footer() ).html(
                  pageTotal // +' ( ₱'+ total + ')' ouput the total of all pages //
                );
                // Total over all pages
            total = api
                    .column( 3 )
                    .data()
                    .reduce( function (a, b) {
                        return intVal(a) + intVal(b);
                    }, 0 );
 
                // Total over this page
                pageTotal = api
                    .column( 3, { page: 'current'} )
                    .data()
                    .reduce( function (a, b) {
                        return intVal(a) + intVal(b);
                    }, 0 );
 
                // Update footer
                $( api.column( 3 ).footer() ).html(
                  pageTotal // +' ( ₱'+ total + ')' ouput the total of all pages //
                );
                // Total over all pages
            total = api
                    .column( 4 )
                    .data()
                    .reduce( function (a, b) {
                        return intVal(a) + intVal(b);
                    }, 0 );
 
                // Total over this page
                pageTotal = api
                    .column( 4, { page: 'current'} )
                    .data()
                    .reduce( function (a, b) {
                        return intVal(a) + intVal(b);
                    }, 0 );
 
                // Update footer
                $( api.column( 4 ).footer() ).html(
                  pageTotal // +' ( ₱'+ total + ')' ouput the total of all pages //
                );
                // Total over all pages
            total = api
                    .column( 5 )
                    .data()
                    .reduce( function (a, b) {
                        return intVal(a) + intVal(b);
                    }, 0 );
 
                // Total over this page
                pageTotal = api
                    .column( 5, { page: 'current'} )
                    .data()
                    .reduce( function (a, b) {
                        return intVal(a) + intVal(b);
                    }, 0 );
 
                // Update footer
                $( api.column( 5 ).footer() ).html(
                  pageTotal // +' ( ₱'+ total + ')' ouput the total of all pages //
                );
                // Total over all pages
            total = api
                    .column( 6 )
                    .data()
                    .reduce( function (a, b) {
                        return intVal(a) + intVal(b);
                    }, 0 );
 
                // Total over this page
                pageTotal = api
                    .column( 6, { page: 'current'} )
                    .data()
                    .reduce( function (a, b) {
                        return intVal(a) + intVal(b);
                    }, 0 );
 
                // Update footer
                $( api.column( 6 ).footer() ).html(
                  pageTotal // +' ( ₱'+ total + ')' ouput the total of all pages //
                );
                // Total over all pages
            total = api
                    .column( 7 )
                    .data()
                    .reduce( function (a, b) {
                        return intVal(a) + intVal(b);
                    }, 0 );
 
                // Total over this page
                pageTotal = api
                    .column( 7, { page: 'current'} )
                    .data()
                    .reduce( function (a, b) {
                        return intVal(a) + intVal(b);
                    }, 0 );
 
                // Update footer
                $( api.column( 7 ).footer() ).html(
                  pageTotal // +' ( ₱'+ total + ')' ouput the total of all pages //
                );
                // Total over all pages
            total = api
                    .column( 8 )
                    .data()
                    .reduce( function (a, b) {
                        return intVal(a) + intVal(b);
                    }, 0 );
 
                // Total over this page
                pageTotal = api
                    .column( 8, { page: 'current'} )
                    .data()
                    .reduce( function (a, b) {
                        return intVal(a) + intVal(b);
                    }, 0 );
 
                // Update footer
                $( api.column( 8 ).footer() ).html(
                  pageTotal // +' ( ₱'+ total + ')' ouput the total of all pages //
                );
                // Total over all pages
            total = api
                    .column( 9 )
                    .data()
                    .reduce( function (a, b) {
                        return intVal(a) + intVal(b);
                    }, 0 );
 
                // Total over this page
                pageTotal = api
                    .column( 9, { page: 'current'} )
                    .data()
                    .reduce( function (a, b) {
                        return intVal(a) + intVal(b);
                    }, 0 );
 
                // Update footer
                $( api.column( 9 ).footer() ).html(
                  pageTotal // +' ( ₱'+ total + ')' ouput the total of all pages //
                );
                // Total over all pages
            total = api
                    .column( 10 )
                    .data()
                    .reduce( function (a, b) {
                        return intVal(a) + intVal(b);
                    }, 0 );
 
                // Total over this page
                pageTotal = api
                    .column( 10, { page: 'current'} )
                    .data()
                    .reduce( function (a, b) {
                        return intVal(a) + intVal(b);
                    }, 0 );
 
                // Update footer
                $( api.column( 10 ).footer() ).html(
                  pageTotal // +' ( ₱'+ total + ')' ouput the total of all pages //
                );
                // Total over all pages
            total = api
                    .column( 11 )
                    .data()
                    .reduce( function (a, b) {
                        return intVal(a) + intVal(b);
                    }, 0 );
 
                // Total over this page
                pageTotal = api
                    .column( 11, { page: 'current'} )
                    .data()
                    .reduce( function (a, b) {
                        return intVal(a) + intVal(b);
                    }, 0 );
 
                // Update footer
                $( api.column( 11 ).footer() ).html(
                  pageTotal // +' ( ₱'+ total + ')' ouput the total of all pages //
                );
            }
    } );
} );
$('#mytable tbody tr').each(function(i){
             tr=$(this);
            qtdcamas=tr.children('td:eq(2)').html();
            qtdcamasocupadas = tr.children('td:eq(3)').html();
            qtdmacas=tr.children('td:eq(5)').html();
            qtdmacasocupadas = tr.children('td:eq(6)').html();
            qtdbercos = tr.children('td:eq(8)').html();
            qtdbercoscupadas = tr.children('td:eq(9)').html();
            var valorcamasvazias = 0;
            var valormacasvazias = 0;
            var valorbercosvazios = 0
            valorcamasvazias = qtdcamas - qtdcamasocupadas;
            valormacasvazias = qtdmacas - qtdmacasocupadas;
            valorbercosvazios = qtdbercos - qtdbercoscupadas;
            tr.children('td:eq(4)').html(valorcamasvazias);
            tr.children('td:eq(7)').html(valormacasvazias);
            tr.children('td:eq(10)').html(valorbercosvazios);

});


 </script>
<%- include('../home/footer'); %>
</body>
</html>
