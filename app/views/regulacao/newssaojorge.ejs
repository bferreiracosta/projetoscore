<<<<<<< HEAD
<%- include('./cabecalhoregulacao'); %>


    <h2>Pacientes São Jorge</h2>
    <% if(id.length > 0) { %>
        <% for(var i = 0; i < id.length; i++) {%>
            <input name="usuario" type="hidden" value="<%=id[i].id_usuario %>">
            <table class="table table-striped" id="mytable">
                <thead>
                <tr>
                    <th hidden>id</th>
                    <th>SusFacil</th>
                    <th>Nome</th>
                    <th>Idade</th>
                    <th>Leito</th>
                    <th>Exame</th>
                    <th>Temperatura</th>
                    <th>PA Sistolica</th>
                    <th>Frequência Cardiaca</th>
                    <th>Frequência Respiratoria</th>
                    <th>Saturação de O2</th>
                    <th>Nivel de Alerta</th>
                    <th>News</th>
                    <th>Data Atualização</th>
                    <th>Hora Atualização</th>
                    <th></th>
                </tr>
                </thead>
                <tbody>    
                    <% if(paciente.length > 0) { %>
                        <% for(var j = 0; j < paciente.length; j++) {%>
                    <tr>
                        <td hidden><label hidden for="">/ID: </label><%=paciente[j].id_paciente %></td>
                        <td><label hidden for="">/Susfacil: </label><%=paciente[j].susfacil %></td>
                        <td><label hidden for="">/Nome: </label><%=paciente[j].paciente %></td>
                        <td><label hidden for="">/Idade: </label><%=paciente[j].idade %></td>
                        <td><label hidden for="">/Leito: </label><%=paciente[j].leito %></td>
                        <td><label hidden for="">/Exame: </label><%=paciente[j].exame %></td>
                        <td><label hidden for="">/Temperatura: </label><%=paciente[j].temp %></td>
                        <td><label hidden for="">/PA Sistolica: </label><%=paciente[j].sistolica %></td>
                        <td><label hidden for="">/Frequência Cardiaca: </label><%=paciente[j].fc %></td>
                        <td><label hidden for="">/Frequência Respiratoria: </label><%=paciente[j].fr %></td>
                        <td><label hidden for="">/Saturação de O2: </label><%=paciente[j].sat %></td>
                        <td><label hidden for="">/Nivel de Alerta: </label><%=paciente[j].alerta %></td>
                        <td><label hidden for="">/News: </label><%=paciente[j].news %></td>
                        <td><label hidden for="">/Data Atualização: </label><%=paciente[j].data %></td>
                        <td><label hidden for="">/Hora Atualização: </label><%=paciente[j].tempo %></td>
                        <td>
                            <a href="editnewssaojorge/<%=id[i].id_usuario %>/?id=<%=paciente[j].id_paciente %>" class="btn btn-sm btn-info edit">Edit</a>
                        </td>
                    </tr>
                    
                    <% } %>	
                    <% } %>
                </tbody>
            </table>
    <% } %>	
    <% } %>
    <br>
					<br>
					<br>



<!-- Edit Product Modal
<form id="add-row-form" action="/baixasaojorge" method="POST">
    <div class="modal fade" id="sinaisvitais" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="myModalLabel">Baixa Paciente</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <input type="text" name="paciente" class="form-control"  value="nome" id= campo >
                    </div>
                    <div class="form-group">
                        <input type="text" id="fr" name="fr" class="form-control" >
                    </div>
                    <div class="form-group">
                        <input type="text" name="sat"  id="sat" class="form-control"  >
                    </div>
                    <div class="form-group">
                        <input type="text" name="o2"  id="uso02" class="form-control" >
                    </div>
                    <div class="form-group">
                        <input type="text" name="temp"  id="temp" class="form-control"  >
                    </div>
                    <div class="form-group">
                        <input type="text" name="sistolica" id="pa" class="form-control"  >
                    </div>
                    <div class="form-group">
                        <input type="text" name="fc"  id="fc" class="form-control"  >
                    </div>
                    
                    <div class="form-group">
                        <input class="form-control"  id="ment"  type="text" name="covid" >
                    </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Fechar</button>
                    <button type="submit" class="btn btn-success">Atualizar</button>
                </div>
            </div>
        </div>
    </div>
</form> -->
<!-- Importando o jQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pnotify/3.0.0/pnotify.min.js"></script>
<script src="https://colorlib.com/polygon/vendors/jquery/dist/jquery.min.js"></script>
<script src="https://colorlib.com/polygon/vendors/pnotify/dist/pnotify.js"></script>
<script src="https://colorlib.com/polygon/vendors/pnotify/dist/pnotify.buttons.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.7.0/js/dataTables.buttons.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/1.7.0/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/select/1.3.2/js/dataTables.select.min.js" ></script>
<script src="https://cdn.datatables.net/buttons/1.7.0/js/buttons.print.min.js"></script>
<!-- Importando o js do bootstrap -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<%- include('../home/footer'); %>
</body>
</html>
<script type="text/javascript">
$(document).ready(function() {
$('#mytable').DataTable( {
dom: 'Bfrtip',
"sScrollY":  ( 0.8 * $(window).height() ),
    "bPaginate": true,
    "bJQueryUI": true,
    "bScrollCollapse": true,
    "bAutoWidth": true,
    "sScrollX": "100%",
    "sScrollXInner": "100%",
        pageLength: 50,
        buttons: [       
            {
                "extend": "copyHtml5",
                "text": "COPIAR",
                header: false
            },          
            {
                "extend": "pdf",
                "text": "PDF",
                header: false
            },
            {
                "extend": "excelHtml5",
                "text": "EXCEL",
                header: false
            },
            {
                "extend": "print",
                "text": "IMPRIMIR",
                header: false
            }
        ],language: {
            buttons: {
                copyTitle: 'Copiado para área de transferência',
                copyKeys: 'Appuyez sur <i>ctrl</i> ou <i>\u2318</i> + <i>C</i> pour copier les données du tableau à votre presse-papiers. <br><br>Pour annuler, cliquez sur ce message ou appuyez sur Echap.',
                copySuccess: {
                    _: '%d linhas copiadas',
                    1: '1 linha copiada'
                }
            },
            "paginate": {
                "previous": "Anterior",
                "next": "Próximo"
            },
            "search": "Pesquisar:"
        },
        select: true
    } );
} );

    $("#covid").on('change', function(e){
     var exame = $(this).val();
     
     document.getElementById('value').value = exame;
});


setInterval(function(){

    init_PNotify()
},10000)

function init_PNotify() {
    
    var data = new Date;
    var now = (new Date).toLocaleString().substr(11, 5)
    var hoje = data.getDate() + "/" + (data.getMonth()+1) + "/" + data.getFullYear();
    $('#mytable tbody tr').each(function(i){
        tr=$(this);
        tr.children('td').removeClass('fundoIdade');
        valor=tr.children('td:eq(17)').html();
        date = tr.children('td:eq(15)').html();
        news =tr.children('td:eq(13)').html();
       
        if(news <= 4){
            var tempocerto = somartempos('6:00', valor); 
          
            if(hoje > date || now == tempocerto || now > tempocerto){
                tr.children('td:eq(13)').addClass('fundoIdade');
                notificação(); 
            }
        }if(news > 4 && news <=6){
            var tempocerto = somartempos('4:00', valor);

            if(hoje > date || now == tempocerto || now > tempocerto){
                tr.children('td:eq(13)').addClass('fundoIdade1');
                notificação(); 
            }
        }if(news >= 7){
            var tempocerto = somartempos('1:00', valor); 
     
            if( hoje > date || now == tempocerto || now > tempocerto){
                tr.children('td:eq(13)').addClass('fundoIdade2');
                notificação(); 
            }
        }
        if(news = 0){
            var tempocerto = somartempos('1:00', valor); 
        
            if(hoje > date || now == tempocerto || now > tempocerto){
                notificação(); 
            }
        }
        
    })       
};
function somartempos(tempo1, tempo2) {
    
    var array1 = tempo1.split(':');
    var tempo_seg1 = (parseInt(array1[0]) * 3600) + (parseInt(array1[1]) * 60);
    var array2 = tempo2.split(':');
    var tempo_seg2 = (parseInt(array2[0]) * 3600) + (parseInt(array2[1]) * 60);
    var tempofinal = parseInt(tempo_seg1) + parseInt(tempo_seg2);
    var hours = Math.floor(tempofinal / (60 * 60));
    var divisorMinutos = tempofinal % (60 * 60);
    var minutes = Math.floor(divisorMinutos / 60);
    var contador = "";
    if (hours < 10) { contador = "0" + hours + ":"; } else { contador = hours + ":"; }
    if (minutes < 10) { contador += "0" + minutes } else { contador += minutes; }
    return contador;
}

function notificação(){
    new PNotify({
        title: "Alerta",
        type: "info",
        text: "Há paciente sem atualizar",
        maxonscreen: Infinity,
        closer: true,
        closer_hover: true,
        opacity: 0.95,
        history: false,
        sticker: true,
        nonblock: {
            nonblock: true,
        },
        addclass: 'pnotify-center',
        delay:2000,
        styling: 'bootstrap3',
        hide: true,
        remove: true
    });
}
=======
<%- include('./cabecalhoregulacao'); %>


    <h2>Pacientes São Jorge</h2>
    <% if(id.length > 0) { %>
        <% for(var i = 0; i < id.length; i++) {%>
            <input name="usuario" type="hidden" value="<%=id[i].id_usuario %>">
            <table class="table table-striped" id="mytable">
                <thead>
                <tr>
                    <th hidden>id</th>
                    <th>SusFacil</th>
                    <th>Nome</th>
                    <th>Idade</th>
                    <th>Leito</th>
                    <th>Exame</th>
                    <th>Temperatura</th>
                    <th>PA Sistolica</th>
                    <th>Frequência Cardiaca</th>
                    <th>Frequência Respiratoria</th>
                    <th>Saturação de O2</th>
                    <th>Nivel de Alerta</th>
                    <th>News</th>
                    <th>Data Atualização</th>
                    <th>Hora Atualização</th>
                    <th></th>
                </tr>
                </thead>
                <tbody>    
                    <% if(paciente.length > 0) { %>
                        <% for(var j = 0; j < paciente.length; j++) {%>
                    <tr>
                        <td hidden><label hidden for="">/ID: </label><%=paciente[j].id_paciente %></td>
                        <td><label hidden for="">/Susfacil: </label><%=paciente[j].susfacil %></td>
                        <td><label hidden for="">/Nome: </label><%=paciente[j].paciente %></td>
                        <td><label hidden for="">/Idade: </label><%=paciente[j].idade %></td>
                        <td><label hidden for="">/Leito: </label><%=paciente[j].leito %></td>
                        <td><label hidden for="">/Exame: </label><%=paciente[j].exame %></td>
                        <td><label hidden for="">/Temperatura: </label><%=paciente[j].temp %></td>
                        <td><label hidden for="">/PA Sistolica: </label><%=paciente[j].sistolica %></td>
                        <td><label hidden for="">/Frequência Cardiaca: </label><%=paciente[j].fc %></td>
                        <td><label hidden for="">/Frequência Respiratoria: </label><%=paciente[j].fr %></td>
                        <td><label hidden for="">/Saturação de O2: </label><%=paciente[j].sat %></td>
                        <td><label hidden for="">/Nivel de Alerta: </label><%=paciente[j].alerta %></td>
                        <td><label hidden for="">/News: </label><%=paciente[j].news %></td>
                        <td><label hidden for="">/Data Atualização: </label><%=paciente[j].data %></td>
                        <td><label hidden for="">/Hora Atualização: </label><%=paciente[j].tempo %></td>
                        <td>
                            <a href="editnewssaojorge/<%=id[i].id_usuario %>/?id=<%=paciente[j].id_paciente %>" class="btn btn-sm btn-info edit">Edit</a>
                        </td>
                    </tr>
                    
                    <% } %>	
                    <% } %>
                </tbody>
            </table>
    <% } %>	
    <% } %>
    <br>
					<br>
					<br>



<!-- Edit Product Modal
<form id="add-row-form" action="/baixasaojorge" method="POST">
    <div class="modal fade" id="sinaisvitais" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="myModalLabel">Baixa Paciente</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <input type="text" name="paciente" class="form-control"  value="nome" id= campo >
                    </div>
                    <div class="form-group">
                        <input type="text" id="fr" name="fr" class="form-control" >
                    </div>
                    <div class="form-group">
                        <input type="text" name="sat"  id="sat" class="form-control"  >
                    </div>
                    <div class="form-group">
                        <input type="text" name="o2"  id="uso02" class="form-control" >
                    </div>
                    <div class="form-group">
                        <input type="text" name="temp"  id="temp" class="form-control"  >
                    </div>
                    <div class="form-group">
                        <input type="text" name="sistolica" id="pa" class="form-control"  >
                    </div>
                    <div class="form-group">
                        <input type="text" name="fc"  id="fc" class="form-control"  >
                    </div>
                    
                    <div class="form-group">
                        <input class="form-control"  id="ment"  type="text" name="covid" >
                    </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Fechar</button>
                    <button type="submit" class="btn btn-success">Atualizar</button>
                </div>
            </div>
        </div>
    </div>
</form> -->
<!-- Importando o jQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pnotify/3.0.0/pnotify.min.js"></script>
<script src="https://colorlib.com/polygon/vendors/jquery/dist/jquery.min.js"></script>
<script src="https://colorlib.com/polygon/vendors/pnotify/dist/pnotify.js"></script>
<script src="https://colorlib.com/polygon/vendors/pnotify/dist/pnotify.buttons.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.7.0/js/dataTables.buttons.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/1.7.0/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/select/1.3.2/js/dataTables.select.min.js" ></script>
<script src="https://cdn.datatables.net/buttons/1.7.0/js/buttons.print.min.js"></script>
<!-- Importando o js do bootstrap -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<%- include('../home/footer'); %>
</body>
</html>
<script type="text/javascript">
$(document).ready(function() {
$('#mytable').DataTable( {
dom: 'Bfrtip',
"sScrollY":  ( 0.8 * $(window).height() ),
    "bPaginate": true,
    "bJQueryUI": true,
    "bScrollCollapse": true,
    "bAutoWidth": true,
    "sScrollX": "100%",
    "sScrollXInner": "100%",
        pageLength: 50,
        buttons: [       
            {
                "extend": "copyHtml5",
                "text": "COPIAR",
                header: false
            },          
            {
                "extend": "pdf",
                "text": "PDF",
                header: false
            },
            {
                "extend": "excelHtml5",
                "text": "EXCEL",
                header: false
            },
            {
                "extend": "print",
                "text": "IMPRIMIR",
                header: false
            }
        ],language: {
            buttons: {
                copyTitle: 'Copiado para área de transferência',
                copyKeys: 'Appuyez sur <i>ctrl</i> ou <i>\u2318</i> + <i>C</i> pour copier les données du tableau à votre presse-papiers. <br><br>Pour annuler, cliquez sur ce message ou appuyez sur Echap.',
                copySuccess: {
                    _: '%d linhas copiadas',
                    1: '1 linha copiada'
                }
            },
            "paginate": {
                "previous": "Anterior",
                "next": "Próximo"
            },
            "search": "Pesquisar:"
        },
        select: true
    } );
} );

    $("#covid").on('change', function(e){
     var exame = $(this).val();
     
     document.getElementById('value').value = exame;
});


setInterval(function(){

    init_PNotify()
},10000)

function init_PNotify() {
    
    var data = new Date;
    var now = (new Date).toLocaleString().substr(11, 5)
    var hoje = data.getDate() + "/" + (data.getMonth()+1) + "/" + data.getFullYear();
    $('#mytable tbody tr').each(function(i){
        tr=$(this);
        tr.children('td').removeClass('fundoIdade');
        valor=tr.children('td:eq(17)').html();
        date = tr.children('td:eq(15)').html();
        news =tr.children('td:eq(13)').html();
       
        if(news <= 4){
            var tempocerto = somartempos('6:00', valor); 
          
            if(hoje > date || now == tempocerto || now > tempocerto){
                tr.children('td:eq(13)').addClass('fundoIdade');
                notificação(); 
            }
        }if(news > 4 && news <=6){
            var tempocerto = somartempos('4:00', valor);

            if(hoje > date || now == tempocerto || now > tempocerto){
                tr.children('td:eq(13)').addClass('fundoIdade1');
                notificação(); 
            }
        }if(news >= 7){
            var tempocerto = somartempos('1:00', valor); 
     
            if( hoje > date || now == tempocerto || now > tempocerto){
                tr.children('td:eq(13)').addClass('fundoIdade2');
                notificação(); 
            }
        }
        if(news = 0){
            var tempocerto = somartempos('1:00', valor); 
        
            if(hoje > date || now == tempocerto || now > tempocerto){
                notificação(); 
            }
        }
        
    })       
};
function somartempos(tempo1, tempo2) {
    
    var array1 = tempo1.split(':');
    var tempo_seg1 = (parseInt(array1[0]) * 3600) + (parseInt(array1[1]) * 60);
    var array2 = tempo2.split(':');
    var tempo_seg2 = (parseInt(array2[0]) * 3600) + (parseInt(array2[1]) * 60);
    var tempofinal = parseInt(tempo_seg1) + parseInt(tempo_seg2);
    var hours = Math.floor(tempofinal / (60 * 60));
    var divisorMinutos = tempofinal % (60 * 60);
    var minutes = Math.floor(divisorMinutos / 60);
    var contador = "";
    if (hours < 10) { contador = "0" + hours + ":"; } else { contador = hours + ":"; }
    if (minutes < 10) { contador += "0" + minutes } else { contador += minutes; }
    return contador;
}

function notificação(){
    new PNotify({
        title: "Alerta",
        type: "info",
        text: "Há paciente sem atualizar",
        maxonscreen: Infinity,
        closer: true,
        closer_hover: true,
        opacity: 0.95,
        history: false,
        sticker: true,
        nonblock: {
            nonblock: true,
        },
        addclass: 'pnotify-center',
        delay:2000,
        styling: 'bootstrap3',
        hide: true,
        remove: true
    });
}
>>>>>>> 17b38d426456f0d2076af807e7cfc404ea34af31
</script>